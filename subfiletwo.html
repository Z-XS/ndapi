<!DOCTYPE html>

<html lang="en">

<head>

  <meta charset="UTF-8">

  <title>Title</title>

  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

</head>

<body>

  <input type="file" name="file" accept="image/*" onchange="changeImg(event)"/>

  <button onclick="submit()">上传</button>

 

  <script>

    let file = ''

    let fileName = ''

 

    function submit() {

      let data = new FormData()

      data.append('imgName', fileName)

      data.append('img', file)

 

      axios({

        method: 'post',

        url: 'http://localhost:3001',

        data: data

      })

        .then(response => {

          console.log(response.data)

        })

        .catch(error => {

          console.log(error)

        })

    }

 

    function changeImg(e) {
      console.log(e)
      file = e.target.files.item(0)
      console.log(file)
      // 如果不选择图片

      if (file === null) {

        return

      }

      fileName = file.name

    }

  </script>

</body>

</html>